import{n as L,J as $,K as A,o as c,v as g,w as a,b as t,u as o,d as h,c as V,F as S,s as x,L as I,M as T,N as R,O as D,P as O,Q as z,R as M,B,S as Q,T as j,r as G,a as l,U as J,z as K,V as W,t as E,W as X,X as Y,Y as Z,y as H,Z as ee}from"./BSfMX9rO.js";/* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        */import{a as P,u as te}from"./Btu9iQIT.js";/* empty css        *//* empty css        *//* empty css        *//* empty css        */const le={__name:"CheckoutForm",props:{checkoutFormVisible:Boolean},emits:["update:checkoutFormVisible"],setup(q,{emit:w}){const u=P(),F=q,_=w;L(()=>{u.fetchStates(),u.fetchCity()});const p=$({get:()=>F.checkoutFormVisible,set:i=>_("update:checkoutFormVisible",i)}),s=A({contactNumber:"",fullName:"",pincode:"",state:"",city:"",fullAddress:""}),k=A({contactNumber:[{required:!0,message:"Contact number required",trigger:"blur"},{type:"string",pattern:/^\d{10}$/,message:"Enter a valid 10-digit contact number",trigger:"change"}],fullName:[{required:!0,message:"Full Name required",trigger:"blur"}],pincode:[{required:!0,message:"pincode required",trigger:"blur"},{validator:(i,e,d)=>{e&&!/^[1-9]\d{5}$/.test(e)?d("PIN code cannot start from zero."):e&&!/^\d{6}$/.test(e)?d("PIN code must be 6 digits long."):e&&/^\d{3} \d{3}$/.test(e)?d("PIN code cannot have a space after 3 digits."):d()},trigger:"blur"}],state:[{required:!0,message:"state required",trigger:"blur"}],district:[{required:!0,message:"district required",trigger:"blur"}],fullAddress:[{required:!0,message:"Full address required",trigger:"change"},{min:20,max:100,message:"Enter a valid address",trigger:"blur"}]}),f=()=>{const i=u.cartList.map(e=>({product:e.product,quantity:e.count}));u.confirmOrder({items:i,name:s.fullName,pincode:s.pincode,mobile:s.contactNumber,address:s.fullAddress,state:s.state,city:s.city}),p.value=!1};return(i,e)=>{const d=T,m=R,b=D,y=O,C=z,v=M,r=B,U=Q,N=j;return c(),g(N,{modelValue:o(p),"onUpdate:modelValue":e[7]||(e[7]=n=>I(p)?p.value=n:null),title:"Checkout Form",style:{"min-width":"300px"}},{default:a(()=>[t(U,{model:o(s),style:{padding:"1rem"},"label-position":"top",rules:o(k)},{default:a(()=>[t(m,{prop:"contactNumber",label:"Contact Number","label-width":"auto"},{default:a(()=>[t(d,{modelValue:o(s).contactNumber,"onUpdate:modelValue":e[0]||(e[0]=n=>o(s).contactNumber=n),placeholder:"Contact Number"},{prepend:a(()=>[h("+91")]),_:1},8,["modelValue"])]),_:1}),t(m,{prop:"fullName",label:"Full Name","label-width":"auto"},{default:a(()=>[t(d,{modelValue:o(s).fullName,"onUpdate:modelValue":e[1]||(e[1]=n=>o(s).fullName=n),placeholder:"Full Name"},null,8,["modelValue"])]),_:1}),t(m,{prop:"pincode",label:"Pincode","label-width":"auto"},{default:a(()=>[t(d,{modelValue:o(s).pincode,"onUpdate:modelValue":e[2]||(e[2]=n=>o(s).pincode=n),placeholder:"Pincode"},null,8,["modelValue"])]),_:1}),t(v,{gutter:10},{default:a(()=>[t(C,{span:12},{default:a(()=>[t(m,{prop:"state",label:"State","label-width":"auto"},{default:a(()=>[t(y,{modelValue:o(s).state,"onUpdate:modelValue":e[3]||(e[3]=n=>o(s).state=n),placeholder:"select state"},{default:a(()=>[(c(!0),V(S,null,x(o(u).statesList,n=>(c(),g(b,{label:n.name,value:n.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(C,{span:12},{default:a(()=>[t(m,{prop:"city",label:"City","label-width":"auto"},{default:a(()=>[t(y,{modelValue:o(s).city,"onUpdate:modelValue":e[4]||(e[4]=n=>o(s).city=n),placeholder:"select city"},{default:a(()=>[(c(!0),V(S,null,x(o(u).cityList,n=>(c(),g(b,{label:n.name,value:n.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(m,{label:"Full Address","label-width":"auto",prop:"fullAddress"},{default:a(()=>[t(d,{modelValue:o(s).fullAddress,"onUpdate:modelValue":e[5]||(e[5]=n=>o(s).fullAddress=n),autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"Full Address"},null,8,["modelValue"])]),_:1}),t(v,{justify:"end"},{default:a(()=>[t(m,null,{default:a(()=>[t(r,{onClick:e[6]||(e[6]=n=>p.value=!1)},{default:a(()=>[h("Cancel")]),_:1}),t(r,{type:"primary",onClick:f},{default:a(()=>[h("Confirm Order")]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}},oe={class:"cart-wrapper"},ae={class:"cart-table"},se=l("div",{class:"heading"},[l("h1",null,"Shopping Cart"),l("span",null,[l("i",{class:"ri-arrow-right-line"}),h(" Continue Shopping ")])],-1),ne={key:0,style:{width:"100%"}},re={class:"product-info"},ue={class:"cart-product-details"},ie={class:"name"},de=l("span",null,"Quantity: 500g",-1),ce=l("i",{class:"ri-delete-bin-line"},null,-1),me=l("h2",null,"Order Summary",-1),pe={class:"row"},_e=l("p",null,"Subtotal",-1),fe=l("div",{class:"row"},[l("p",null,"Delivery Fee"),l("h3",null,"₹100")],-1),ge=l("div",{class:"row"},[l("p",null,"GST"),l("h3",null,"₹10")],-1),he=l("div",{class:"row"},[l("p",null,"Total"),l("h3",null,"₹810")],-1),qe={__name:"Cart",setup(q){const w=ee(),u=P(),F=te(),_=G(!1);L(async()=>{await u.loadFromStorage()});const p=f=>`${w.public.imageBase+f}`,s=$(()=>u.cartList.reduce((f,i)=>f+i.price*i.count,0)),k=()=>{F.authenticated?_.value=!0:X("/AuthLogin")};return(f,i)=>{const e=Y,d=Z,m=B,b=K,y=W,C=H,v=le;return c(),V("div",oe,[l("div",ae,[se,o(u).cartList.length?(c(),V("div",ne,[(c(!0),V(S,null,x(o(u).cartList,(r,U)=>(c(),g(b,null,{default:a(()=>[l("div",re,[t(e,{style:{width:"100px",height:"100px"},src:p(r.thumbnail.download_url),alt:"product image",fit:"cover"},null,8,["src"]),l("div",ue,[l("div",ie,[l("p",null,E(r.name),1),de]),t(d,{modelValue:r.count,"onUpdate:modelValue":N=>r.count=N,onChange:()=>o(u).updateItemCount(r.id,r.product,r.count),min:1},null,8,["modelValue","onUpdate:modelValue","onChange"]),l("h3",null,E(`₹${r.price*r.count}`),1),t(m,{circle:"",onClick:N=>o(u).removeItem(r)},{default:a(()=>[ce]),_:2},1032,["onClick"])])])]),_:2},1024))),256))])):(c(),g(y,{key:1,size:"large",tag:"b"},{default:a(()=>[h("Cart is Empty")]),_:1}))]),o(u).cartList.length?(c(),g(b,{key:0,class:"cart-summary"},{default:a(()=>[me,l("div",pe,[_e,l("h3",null,E(`₹${o(s)}`),1)]),fe,ge,t(C),he,t(m,{style:{margin:"0 auto"},type:"success",onClick:k},{default:a(()=>[h("Proceed to Checkout")]),_:1})]),_:1})):J("",!0),t(v,{checkoutFormVisible:o(_),"onUpdate:checkoutFormVisible":i[0]||(i[0]=r=>I(_)?_.value=r:null)},null,8,["checkoutFormVisible"])])}}};export{qe as default};
